<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Add Invoice</title>
    <!-- Include Bootstrap CSS and JavaScript -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-4">
    <h1>Add Invoice</h1>

    <form th:action="@{/invoices/add}" method="post" id="invoiceForm">
        <div class="form-group">
            <label for="invoiceNumber">Invoice Number:</label>
            <input type="text" class="form-control" id="invoiceNumber" name="invoiceNumber" />
        </div>

        <div class="form-group">
            <label for="date">Date:</label>
            <input type="date" class="form-control" id="date" name="date" />
        </div>

        <div class="form-group">
            <label for="amount">Amount:</label>
            <input type="text" class="form-control" id="amount" name="amount" />
        </div>

        <!-- Dynamically generate form fields for items -->
        <h2>Items</h2>
        <div id="itemsContainer">
            <div class="item">
                <label>Item Name:</label>
                <input type="text" class="form-control" name="itemNames" />

                <label>Item Amount:</label>
                <input type="text" class="form-control" name="itemAmounts" />
            </div>
        </div>

        <button type="button" class="btn btn-secondary mt-2" id="addItemBtn">Add Item</button>

        <button type="button" class="btn btn-primary mt-2" id="addInvoiceBtn">Add Invoice</button>
    </form>

    <a th:href="@{/invoices}" class="mt-2">Back to Invoices</a>
</div>

<!-- Include Bootstrap JS and other JavaScript code -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script th:inline="javascript">
    document.addEventListener("DOMContentLoaded", function() {
        const addItemBtn = document.getElementById("addItemBtn");
        const itemsContainer = document.getElementById("itemsContainer");
        const addInvoiceBtn = document.getElementById("addInvoiceBtn");

        addItemBtn.addEventListener("click", function() {
            const newItemDiv = document.createElement("div");
            newItemDiv.classList.add("item");
            newItemDiv.innerHTML = `
                <label>Item Name:</label>
                <input type="text" class="form-control" name="itemNames" />

                <label>Item Amount:</label>
                <input type="text" class="form-control" name="itemAmounts" />
            `;
            itemsContainer.appendChild(newItemDiv);
        });

        addInvoiceBtn.addEventListener("click", function() {
            const form = document.getElementById("invoiceForm");
            form.submit();
        });
    });
</script>
</body>
</html>
